"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3428],{608:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>p,frontMatter:()=>i,metadata:()=>r,toc:()=>o});var n=a(83117),u=(a(67294),a(3905));a(61839);const i={},s="RabbitMQ Backbone Plugin",r={unversionedId:"use/integrate/threatbus/understand/plugins/backbones/rabbitmq",id:"use/integrate/threatbus/understand/plugins/backbones/rabbitmq",title:"RabbitMQ Backbone Plugin",description:"The RabbitMQ plugin enables Threat Bus to use",source:"@site/docs/use/integrate/threatbus/understand/plugins/backbones/rabbitmq.md",sourceDirName:"use/integrate/threatbus/understand/plugins/backbones",slug:"/use/integrate/threatbus/understand/plugins/backbones/rabbitmq",permalink:"/docs/use/integrate/threatbus/understand/plugins/backbones/rabbitmq",draft:!1,editUrl:"https://github.com/tenzir/vast/tree/master/web/docs/use/integrate/threatbus/understand/plugins/backbones/rabbitmq.md",tags:[],version:"current",frontMatter:{},sidebar:"docsSidebar",previous:{title:"In-Memory Backbone Plugin",permalink:"/docs/use/integrate/threatbus/understand/plugins/backbones/in-mem"},next:{title:"Plugin Development",permalink:"/docs/use/integrate/threatbus/understand/plugins/plugin-development"}},l={},o=[{value:"Installation",id:"installation",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Parameter Explanation",id:"parameter-explanation",level:3},{value:"queue.name_suffix",id:"queuename_suffix",level:5},{value:"queue.name_join_symbol",id:"queuename_join_symbol",level:4},{value:"queue.durable",id:"queuedurable",level:4},{value:"queue.auto_delete",id:"queueauto_delete",level:4},{value:"queue.lazy",id:"queuelazy",level:4},{value:"queue.exclusive",id:"queueexclusive",level:4},{value:"queue.max_items",id:"queuemax_items",level:4}],m={toc:o};function p(e){let{components:t,...a}=e;return(0,u.kt)("wrapper",(0,n.Z)({},m,a,{components:t,mdxType:"MDXLayout"}),(0,u.kt)("h1",{id:"rabbitmq-backbone-plugin"},"RabbitMQ Backbone Plugin"),(0,u.kt)("p",null,"The ",(0,u.kt)("a",{parentName:"p",href:"https://www.rabbitmq.com"},"RabbitMQ")," plugin enables Threat Bus to use\nRabbitMQ as message broker backbone. RabbitMQ provides a reliable,\nhigh-performance message passing infrastructure for indicator delivery within\nThreat Bus. Using this backbone plugin, Threat Bus relays all messages through a\nRabbitMQ endpoint. As a result, Threat Bus can scale horizontally via RabbitMQ."),(0,u.kt)("p",null,"This plugin simplifies network segregation and the communication trust model.\nThreat Bus requires no trust between the connected applications. Connected apps\nonly need to know one Threat Bus endpoint, while Threat Bus itself only needs\nto know a RabbitMQ endpoint."),(0,u.kt)("p",null,"The plugin implements the minimal\n",(0,u.kt)("a",{parentName:"p",href:"https://github.com/tenzir/threatbus/blob/master/threatbus/backbonespecs.py"},"backbone specs"),"\nfor Threat Bus backbone plugins."),(0,u.kt)("h2",{id:"installation"},"Installation"),(0,u.kt)("p",null,"Install the RabbitMQ backbone plugin via ",(0,u.kt)("inlineCode",{parentName:"p"},"pip"),"."),(0,u.kt)("pre",null,(0,u.kt)("code",{parentName:"pre",className:"language-bash"},"pip install threatbus-rabbitmq\n")),(0,u.kt)("h2",{id:"configuration"},"Configuration"),(0,u.kt)("p",null,"The plugin requires some configuration parameters, as described in the example\nexcerpt from a Threat Bus ",(0,u.kt)("inlineCode",{parentName:"p"},"config.yaml")," file below."),(0,u.kt)("pre",null,(0,u.kt)("code",{parentName:"pre",className:"language-yaml"},'...\nplugins:\n  backbones:\n    rabbitmq:\n      host: localhost\n      port: 5672\n      username: guest\n      password: guest\n      vhost: /\n      exchange_name: threatbus\n      queue:\n        name_suffix: "my_suffix" # this defaults to \'hostname\' if left blank\n        name_join_symbol: . # queue will be named "threatbus" + join_symbol + name_suffix\n        durable: true\n        auto_delete: false\n        lazy: true\n        exclusive: false\n        max_items: 100000 # optional. remove property / set to 0 to allow infinite length\n...\n')),(0,u.kt)("h3",{id:"parameter-explanation"},"Parameter Explanation"),(0,u.kt)("p",null,"While most parameters are self-explanatory, like ",(0,u.kt)("inlineCode",{parentName:"p"},"host")," and ",(0,u.kt)("inlineCode",{parentName:"p"},"port"),", others\nrequire some further explanation as described below."),(0,u.kt)("h5",{id:"queuename_suffix"},"queue.name_suffix"),(0,u.kt)("p",null,"Each Threat Bus host binds its own queue to the RabbitMQ exchange. The name of\nthat queue should not overlap with the queue names from other Threat Bus\ninstances (i.e., in a shared RabbitMQ host scenario). Hence, queue names are by\ndefault suffixed with the ",(0,u.kt)("inlineCode",{parentName:"p"},"hostname")," of the Threat Bus instance that binds to\nthem. Use the option ",(0,u.kt)("inlineCode",{parentName:"p"},"queue.name_suffix")," to override the name-suffix of queues\nwith a user-specified value, instead of the hostname."),(0,u.kt)("h4",{id:"queuename_join_symbol"},"queue.name_join_symbol"),(0,u.kt)("p",null,"The plugin creates a\n",(0,u.kt)("a",{parentName:"p",href:"https://www.rabbitmq.com/tutorials/amqp-concepts.html#exchange-fanout"},"fanout exchange"),"\nand binds a queue to it on the RabbitMQ host. The option ",(0,u.kt)("inlineCode",{parentName:"p"},"name_join_symbol"),"\nprovides some flexibility to the user when it comes to the naming of these\nresources."),(0,u.kt)("p",null,"For example, if your organization has a naming scheme to always concatenate\nresource names based on their domain via ",(0,u.kt)("inlineCode",{parentName:"p"},"_"),", you can specify that here. The\nresulting queue name with then be e.g., ",(0,u.kt)("inlineCode",{parentName:"p"},"threatbus_<queue.name_suffix>"),"."),(0,u.kt)("h4",{id:"queuedurable"},"queue.durable"),(0,u.kt)("p",null,"Sets the ",(0,u.kt)("a",{parentName:"p",href:"https://www.rabbitmq.com/queues.html#properties"},"queue property")," for\ndurable queues. If ",(0,u.kt)("inlineCode",{parentName:"p"},"true"),", queues will survive RabbitMQ broker restarts."),(0,u.kt)("h4",{id:"queueauto_delete"},"queue.auto_delete"),(0,u.kt)("p",null,"Sets the ",(0,u.kt)("a",{parentName:"p",href:"https://www.rabbitmq.com/queues.html#properties"},"queue property")," to\nauto-delete queues. If ",(0,u.kt)("inlineCode",{parentName:"p"},"true"),", these queues will be cleared from the RabbitMQ\nhost when Threat Bus disconnects."),(0,u.kt)("h4",{id:"queuelazy"},"queue.lazy"),(0,u.kt)("p",null,"If set, Threat Bus will declare all queues as\n",(0,u.kt)("a",{parentName:"p",href:"https://www.rabbitmq.com/lazy-queues.html"},"lazy"),". If ",(0,u.kt)("inlineCode",{parentName:"p"},"true"),", RabbitMQ shifts\nqueue contents to disk early and optimizes for memory management."),(0,u.kt)("h4",{id:"queueexclusive"},"queue.exclusive"),(0,u.kt)("p",null,"Sets the ",(0,u.kt)("a",{parentName:"p",href:"https://www.rabbitmq.com/queues.html#properties"},"queue property")," for\nexclusive queues. If ",(0,u.kt)("inlineCode",{parentName:"p"},"true"),", a RabbitMQ queue can only be used by one connection\nand is deleted after that connection closes."),(0,u.kt)("h4",{id:"queuemax_items"},"queue.max_items"),(0,u.kt)("p",null,"Limits the ",(0,u.kt)("a",{parentName:"p",href:"https://www.rabbitmq.com/maxlength.html"},"maximum amount")," of items in\na RabbitMQ queue."))}p.isMDXComponent=!0}}]);